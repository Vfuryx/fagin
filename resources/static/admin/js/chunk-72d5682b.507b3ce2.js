(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72d5682b","chunk-2b044599"],{"3bd7":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.model.id>0?"菜单编辑":"菜单新增",width:860,visible:e.visible,confirmLoading:e.loading,"ok-text":"确认","cancel-text":"取消"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.loading}},[a("a-form-model",{ref:"ruleForm",attrs:{layout:"inline",model:e.model,rules:e.rules}},[e.model&&e.model.id>0?a("a-form-model-item",{staticStyle:{width:"70%","margin-right":"0"},attrs:{"label-col":{span:5},"wrapper-col":{span:5},label:"主键ID",prop:"id"}},[a("a-input",{attrs:{disabled:""},model:{value:e.model.id,callback:function(t){e.$set(e.model,"id",t)},expression:"model.id"}})],1):e._e(),a("a-form-model-item",{staticStyle:{width:"50%","margin-right":"0"},attrs:{"label-col":{span:7},"wrapper-col":{span:17},label:"菜单类型",prop:"type"}},[a("a-select",{model:{value:e.model.type,callback:function(t){e.$set(e.model,"type",t)},expression:"model.type"}},[a("a-select-option",{attrs:{value:0}},[e._v("后台菜单")]),a("a-select-option",{attrs:{value:1}},[e._v("商家菜单")])],1)],1),a("a-form-model-item",{staticStyle:{width:"50%","margin-right":"0"},attrs:{"label-col":{span:7},"wrapper-col":{span:17},label:"上级菜单",prop:"parent_id"}},[a("a-tree-select",{model:{value:e.model.parent_id,callback:function(t){e.$set(e.model,"parent_id",t)},expression:"model.parent_id"}},[a("a-tree-select-node",{attrs:{title:"顶级菜单",value:0}}),e._l(e.list,(function(t){return[a("a-tree-select-node",{key:t.id,attrs:{title:t.title,value:t.id}},[e._l(t.children,(function(e){return[a("a-tree-select-node",{key:e.id,attrs:{title:e.title,value:e.id}})]}))],2)]}))],2)],1),a("a-form-model-item",{staticStyle:{width:"50%","margin-right":"0"},attrs:{label:"菜单名称","label-col":{span:7},"wrapper-col":{span:17},prop:"title"}},[a("a-input",{model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),a("a-form-model-item",{staticStyle:{width:"50%","margin-right":"0"},attrs:{label:"路径","label-col":{span:7},"wrapper-col":{span:17},prop:"path"}},[a("a-input",{model:{value:e.model.path,callback:function(t){e.$set(e.model,"path",t)},expression:"model.path"}})],1),a("a-form-model-item",{staticStyle:{width:"50%","margin-right":"0"},attrs:{label:"路由名称","label-col":{span:7},"wrapper-col":{span:17},prop:"name"}},[a("a-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),a("a-form-model-item",{staticStyle:{width:"50%","margin-right":"0"},attrs:{label:"组件名称","label-col":{span:7},"wrapper-col":{span:17},prop:"component"}},[a("a-input",{model:{value:e.model.component,callback:function(t){e.$set(e.model,"component",t)},expression:"model.component"}})],1),a("a-form-model-item",{staticStyle:{width:"50%","margin-right":"0"},attrs:{label:"重定向","label-col":{span:7},"wrapper-col":{span:17},prop:"redirect"}},[a("a-input",{model:{value:e.model.redirect,callback:function(t){e.$set(e.model,"redirect",t)},expression:"model.redirect"}})],1),a("a-form-model-item",{staticStyle:{width:"50%","margin-right":"0"},attrs:{label:"目标","label-col":{span:7},"wrapper-col":{span:17},prop:"target"}},[a("a-select",{model:{value:e.model.target,callback:function(t){e.$set(e.model,"target",t)},expression:"model.target"}},[a("a-select-option",{attrs:{value:""}},[e._v("无")]),a("a-select-option",{attrs:{value:"_blank"}},[e._v("新窗口")]),a("a-select-option",{attrs:{value:"_parent"}},[e._v("父窗口")]),a("a-select-option",{attrs:{value:"_self"}},[e._v("默认")]),a("a-select-option",{attrs:{value:"_top"}},[e._v("新浏览器")])],1)],1),a("a-form-model-item",{staticStyle:{width:"88%","margin-right":"0"},attrs:{label:"图标","label-col":{span:4},"wrapper-col":{span:20},prop:"icon"}},[a("a-auto-complete",{staticClass:"certain-category-search",staticStyle:{width:"100%"},attrs:{"dropdown-class-name":"certain-category-search-dropdown","dropdown-match-select-width":!1,"dropdown-style":{width:"300px"},size:"large",placeholder:"icon","option-label-prop":"value"}},[a("a-input",[a("a-icon",{staticClass:"certain-category-icon",attrs:{slot:"suffix",type:e.model.icon},slot:"suffix"})],1),a("template",{slot:"dataSource"},[a("a-select-option",{key:"all",staticClass:"show-all",attrs:{disabled:""}},[a("icon-selector",{on:{change:e.handleIconChange}})],1)],1)],2)],1),a("a-form-model-item",{staticStyle:{width:"50%","margin-right":"0"},attrs:{label:"显示排序","label-col":{span:7},"wrapper-col":{span:17},prop:"sort"}},[a("a-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}})],1),a("a-form-model-item",{staticStyle:{width:"70%","margin-right":"0"},attrs:{label:"菜单展示","label-col":{span:5},"wrapper-col":{span:18},prop:"is_show"}},[a("a-radio-group",{attrs:{name:"is_show"},model:{value:e.model.is_show,callback:function(t){e.$set(e.model,"is_show",t)},expression:"model.is_show"}},[a("a-radio",{attrs:{value:1}},[e._v("开启")]),a("a-radio",{attrs:{value:0}},[e._v("关闭")])],1)],1),a("a-form-model-item",{staticStyle:{width:"70%","margin-right":"0"},attrs:{label:"子菜单展示","label-col":{span:5},"wrapper-col":{span:18},prop:"is_hide_child"}},[a("a-radio-group",{attrs:{name:"is_hide_child"},model:{value:e.model.is_hide_child,callback:function(t){e.$set(e.model,"is_hide_child",t)},expression:"model.is_hide_child"}},[a("a-radio",{attrs:{value:0}},[e._v("展示")]),a("a-radio",{attrs:{value:1}},[e._v("隐藏")])],1)],1),a("a-form-model-item",{staticStyle:{width:"70%","margin-right":"0"},attrs:{label:"菜单状态","label-col":{span:5},"wrapper-col":{span:18},prop:"status"}},[a("a-radio-group",{attrs:{name:"status"},model:{value:e.model.status,callback:function(t){e.$set(e.model,"status",t)},expression:"model.status"}},[a("a-radio",{attrs:{value:1}},[e._v("开启")]),a("a-radio",{attrs:{value:0}},[e._v("关闭")])],1)],1)],1)],1)],1)},o=[],r=(a("b2a3"),a("dc88"),a("2ef0f"),a("5704"),a("1098")),n=a.n(r),s=a("6042"),l=a.n(s),c=a("41b2"),d=a.n(c),u=a("d4b2"),p=a("a615"),m=a("9839"),h=a("b558"),f=a("b24f"),g=a.n(f),b=a("4d91"),v=a("7b05"),_=a("daa3");function y(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(){for(var e=arguments.length,a=Array(e),i=0;i<e;i++)a[i]=arguments[i];for(var o=0;o<t.length;o++)t[o]&&"function"===typeof t[o]&&t[o].apply(this,a)}}var w={name:"InputElement",inheritAttrs:!1,props:{value:b["a"].any,disabled:b["a"].bool,placeholder:b["a"].string},render:function(){var e=this.$slots,t=void 0===e?{}:e,a=this.$attrs,i=void 0===a?{}:a,o=this.placeholder,r=Object(_["k"])(this),n=Object(_["l"])(this),s=void 0===n.value?"":n.value,l=t["default"][0],c=t["default"][0].componentOptions,u=void 0===c?{}:c,p=u.listeners,m=void 0===p?{}:p,h=d()({},m),f=!0,b=!1,w=void 0;try{for(var k,$=Object.entries(r)[Symbol.iterator]();!(f=(k=$.next()).done);f=!0){var x=k.value,O=g()(x,2),S=O[0],C=O[1];h[S]=y(C,m[S])}}catch(A){b=!0,w=A}finally{try{!f&&$["return"]&&$["return"]()}finally{if(b)throw w}}var j=d()({},i,{value:s});return delete n.placeholder,o&&(n.placeholder=o,j.placeholder=o),Object(v["a"])(l,{domProps:{value:s},props:n,on:h,attrs:j,ref:"ele"})}},k=a("4df5"),$=a("db14"),x=d()({},Object(m["a"])(),{value:m["c"],defaultValue:m["c"],dataSource:b["a"].array,dropdownMenuStyle:b["a"].object,optionLabelProp:String,dropdownMatchSelectWidth:b["a"].bool}),O={name:"AAutoComplete",props:d()({},x,{prefixCls:b["a"].string.def("ant-select"),showSearch:b["a"].bool.def(!1),transitionName:b["a"].string.def("slide-up"),choiceTransitionName:b["a"].string.def("zoom"),autoFocus:b["a"].bool,backfill:b["a"].bool,optionLabelProp:b["a"].string.def("children"),filterOption:b["a"].oneOfType([b["a"].bool,b["a"].func]).def(!1),defaultActiveFirstOption:b["a"].bool.def(!0)}),Option:d()({},u["a"],{name:"AAutoCompleteOption"}),OptGroup:d()({},p["a"],{name:"AAutoCompleteOptGroup"}),model:{prop:"value",event:"change"},inject:{configProvider:{default:function(){return k["a"]}}},provide:function(){return{savePopupRef:this.savePopupRef}},methods:{savePopupRef:function(e){this.popupRef=e},getInputElement:function(){var e=this.$createElement,t=this.$slots,a=this.placeholder,i=Object(_["c"])(t["default"]),o=i.length?i[0]:e(h["a"],{attrs:{lazy:!1}});return e(w,{attrs:{placeholder:a}},[o])},focus:function(){this.$refs.select&&this.$refs.select.focus()},blur:function(){this.$refs.select&&this.$refs.select.blur()}},render:function(){var e,t=arguments[0],a=this.size,i=this.prefixCls,o=this.optionLabelProp,r=this.dataSource,s=this.$slots,c=this.configProvider.getPrefixCls,p=c("select",i),h=(e={},l()(e,p+"-lg","large"===a),l()(e,p+"-sm","small"===a),l()(e,p+"-show-search",!0),l()(e,p+"-auto-complete",!0),e),f=void 0,g=Object(_["c"])(s.dataSource);f=g.length?g:r?r.map((function(e){if(Object(_["w"])(e))return e;switch("undefined"===typeof e?"undefined":n()(e)){case"string":return t(u["a"],{key:e},[e]);case"object":return t(u["a"],{key:e.value},[e.text]);default:throw new Error("AutoComplete[dataSource] only supports type `string[] | Object[]`.")}})):[];var b={props:d()({},Object(_["l"])(this),{mode:m["d"].SECRET_COMBOBOX_MODE_DO_NOT_USE,optionLabelProp:o,getInputElement:this.getInputElement,notFoundContent:Object(_["g"])(this,"notFoundContent"),placeholder:""}),class:h,ref:"select",on:Object(_["k"])(this)};return t(m["d"],b,[f])},install:function(e){e.use($["a"]),e.component(O.name,O),e.component(O.Option.name,O.Option),e.component(O.OptGroup.name,O.OptGroup)}},S=O,C=(a("922d"),a("09d9")),j=(a("98a7"),a("7bec")),A=(a("17ac"),a("ff57")),E=a("8bbf"),I=a.n(E),q=a("13bb");I.a.use(A["a"]),I.a.use(j["a"]),I.a.use(C["a"]),I.a.use(S);var L={props:{visible:{type:Boolean,required:!0},loading:{type:Boolean,default:function(){return!1}},model:{type:Object,default:function(){return null}},list:{type:Array,default:function(){return[]}}},components:{IconSelector:q["a"]},data:function(){return{form:{id:0,type:0,parent_id:0,icon:"smile",is_show:"",name:"",path:"",target:"",redirect:"",component:"",status:1,sort:0,is_hide_child:0,title:""},rules:{id:[{required:!0,message:"不能空",trigger:"blur"},{type:"integer",min:0,message:"不正确",trigger:"blur"}],type:[{required:!0,message:"不能空",trigger:"blur"},{type:"enum",enum:[0,1],message:"类型不正确",trigger:"blur"}],is_hide_child:[{required:!0,message:"不能空",trigger:"blur"},{type:"enum",enum:[0,1],message:"类型不正确",trigger:"blur"}],is_show:[{required:!0,message:"不能空",trigger:"blur"},{type:"enum",enum:[0,1],message:"类型不正确",trigger:"blur"}],status:[{required:!0,message:"不能空",trigger:"blur"},{type:"enum",enum:[0,1],message:"类型不正确",trigger:"blur"}],parent_id:[{required:!0,message:"不能空",trigger:"blur"},{type:"integer",min:0,message:"上级不正确",trigger:"blur"}],sort:[{required:!0,message:"不能空",trigger:"blur"},{type:"integer",min:0,message:"上级不正确",trigger:"blur"}],title:[{required:!0,message:"不能为空",trigger:"blur"},{min:1,max:32,message:"范围 1 - 32 字符",trigger:"blur"}],path:[{required:!0,message:"不能为空",trigger:"blur"},{min:1,max:128,message:"范围 1 - 128 字符",trigger:"blur"}],component:[{required:!0,message:"不能为空",trigger:"blur"},{min:1,max:32,message:"范围 1 - 32 字符",trigger:"blur"}],redirect:[{min:1,max:128,message:"范围 1 - 128 字符",trigger:"blur"}],target:[{min:1,max:32,message:"范围 1 - 32 字符",trigger:"blur"}],icon:[{min:1,max:32,message:"范围 1 - 32 字符",trigger:"blur"}],name:[{required:!0,message:"不能为空",trigger:"blur"},{min:1,max:32,message:"范围 1 - 32 字符",trigger:"blur"}]},dataSource:[]}},created:function(){},methods:{handleOk:function(){return this.$emit("ok",this.$refs.ruleForm,this.model)},handleIconChange:function(e){this.model.icon=e},handleCancel:function(){return this.$emit("cancel",this.$refs.ruleForm)}}},M=L,R=a("2877"),F=Object(R["a"])(M,i,o,!1,null,null,null);t["default"]=F.exports},"3c08":function(e,t,a){"use strict";a("9e66")},"9e66":function(e,t,a){},dc88:function(e,t,a){},f833:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-header-wrapper",[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.handleAdd(0)}}},[e._v("添加 ")]),a("a-button",{on:{click:e.clear_cache}},[e._v(" 清除缓存 ")])],1),a("a-table",{ref:"table",attrs:{columns:e.columns,"data-source":e.list,pagination:!1,"row-key":"id"},scopedSlots:e._u([{key:"sort",fn:function(t){return a("span",{},[a("a-input",{attrs:{type:"number"},on:{blur:function(a){return e.sortChange(t)}},model:{value:t.sort,callback:function(a){e.$set(t,"sort",a)},expression:"rows.sort"}})],1)}},{key:"status",fn:function(e,t){return a("span",{},[a("a-badge",{attrs:{status:t.status?"processing":"default",color:t.status?"green":"red",text:t.status?"开启":"关闭"}})],1)}},{key:"is_show",fn:function(e,t){return a("span",{},[a("a-badge",{attrs:{status:t.is_show?"processing":"default",text:t.is_show?"开启":"关闭"}})],1)}},{key:"is_hide_child",fn:function(e,t){return a("span",{},[a("a-badge",{attrs:{status:t.is_hide_child?"default":"processing",text:t.is_hide_child?"关闭":"开启"}})],1)}},{key:"action",fn:function(t,i){return a("span",{},[a("a-button",{attrs:{icon:"edit"},on:{click:function(t){return e.handleEdit(i)}}},[e._v("编辑")]),a("a-button",{attrs:{icon:"edit"},on:{click:function(t){return e.handleAdd(i.id)}}},[e._v("新增")]),a("a-button",{attrs:{icon:"edit"},on:{click:function(t){return e.handleDel(i.id)}}},[e._v("删除")])],1)}}])}),a("create-form",{ref:"createModal",attrs:{visible:e.visible,loading:e.confirmLoading,model:e.mdl,list:e.list},on:{cancel:e.handleCancel,ok:e.handleOk}})],1)],1)},o=[],r=a("5530"),n=(a("a15b"),a("3bd7")),s=a("4360"),l={components:{CreateForm:n["default"]},props:{},data:function(){return{type:0,selectedRowKeys:[],columns:[{title:"菜单名称",dataIndex:"title",key:"title"},{title:"路径",dataIndex:"path",key:"paths"},{title:"组件名称",dataIndex:"component",key:"component"},{title:"菜单状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"菜单展示",dataIndex:"is_show",key:"is_show",scopedSlots:{customRender:"is_show"}},{title:"子菜单展示",dataIndex:"is_hide_child",key:"is_hide_child",scopedSlots:{customRender:"is_hide_child"}},{title:"操作",key:"id",fixed:"right",scopedSlots:{customRender:"action"}}],list:[],confirmLoading:!1,mdl:{id:0,type:0,parent_id:0,icon:"smile",is_show:"",name:"",path:"",target:"",redirect:"",component:"",status:1,sort:0,is_hide_child:0,title:""},visible:!1}},watch:{},computed:{},methods:{onSelectChange:function(e){this.selectedRowKeys=e},del:function(){var e=this;if(0===this.selectedRowKeys.length)return this.$message.error("未选择数据.");this.$confirm({title:"你确定要删除选择的数据？",content:"确定删除后无法恢复.",okText:"是",okType:"danger",cancelText:"取消",onOk:function(){var t=e.selectedRowKeys.join(",");e.$delete(e.$api.adminMenus+"/"+t).then((function(t){0===t.error_code?(e.onload(),e.$message.success("删除成功")):e.$message.error(t.msg)}))}})},clear_cache:function(){var e=this;this.$get(this.$api.adminMenusClearCache).then((function(t){return e.$message.success(t.msg)}))},onload:function(){var e=this,t=this.$route.query.type,a={};this.$isEmpty(t)||(a.type=t,this.type=t),s["a"].dispatch("getMenuList").then((function(t){0===t.code?e.list=t.data:e.$notification.error({message:"错误",description:t.message})})).catch((function(){e.$notification.error({message:"错误",description:"请求信息失败，请重试"})}))},sortChange:function(e){var t=this,a=this.$apiHandle(this.$api.adminMenus,e.id);this.$put(a.url,e).then((function(e){return 0===e.error_code?(t.onload(),t.$message.success(e.msg)):t.$message.error(e.msg)}))},handleCancel:function(e){this.visible=!1,e.resetFields()},handleOk:function(e,t){var a=this;e.validate((function(i){return i?(t.id>0?s["a"].dispatch("updateMenu",t).then((function(t){return 0!==t.code?(a.$notification.error({message:"错误",description:t.message}),!1):(a.visible=!1,a.confirmLoading=!1,e.resetFields(),a.onload(),a.$message.info("修改成功"),!0)})).catch((function(e){return a.$notification.error({message:"错误",description:"请求信息失败，请重试"}),!1})):s["a"].dispatch("addMenu",t).then((function(t){return 0!==t.code?(a.$notification.error({message:"错误",description:t.message}),!1):(a.visible=!1,a.confirmLoading=!1,e.resetFields(),a.onload(),a.$message.info("新增成功"),!0)})).catch((function(e){return a.$notification.error({message:"错误",description:"请求信息失败，请重试"}),!1})),!0):(a.confirmLoading=!1,!1)}))},handleAdd:function(e){this.mdl={id:0,type:0,parent_id:e,icon:"smile",is_show:0,name:"",path:"",target:"",redirect:"",component:"",status:1,sort:0,is_hide_child:0,title:""},this.visible=!0},handleEdit:function(e){var t=this;this.visible=!0,this.confirmLoading=!0,s["a"].dispatch("showMenu",e.id).then((function(e){if(0!==e.code)return t.$notification.error({message:"错误",description:e.message}),t.visible=!0,!1;t.mdl=Object(r["a"])({},e.data),t.confirmLoading=!1})).catch((function(e){return t.$notification.error({message:"错误",description:"请求信息失败，请重试"}),t.visible=!1,!1}))},handleDel:function(e){var t=this;this.$confirm({title:"你确定要删除选择的数据？",content:"确定删除后无法恢复.",okText:"是",okType:"danger",cancelText:"取消",onOk:function(){s["a"].dispatch("delMenu",e).then((function(e){if(0!==e.code)return t.$notification.error({message:"错误",description:e.message}),!1;t.onload(),t.$message.info("删除成功")})).catch((function(e){return t.$notification.error({message:"错误",description:"请求信息失败，请重试"}),!1}))}})}},created:function(){this.onload()},mounted:function(){}},c=l,d=(a("3c08"),a("2877")),u=Object(d["a"])(c,i,o,!1,null,"58e74b48",null);t["default"]=u.exports}}]);