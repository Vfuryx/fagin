var w=Object.defineProperty;var E=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var F=(e,a,t)=>a in e?w(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,D=(e,a)=>{for(var t in a||(a={}))x.call(a,t)&&F(e,t,a[t]);if(E)for(var t of E(a))C.call(a,t)&&F(e,t,a[t]);return e};var b=(e,a,t)=>new Promise((n,l)=>{var m=o=>{try{d(t.next(o))}catch(c){l(c)}},f=o=>{try{d(t.throw(o))}catch(c){l(c)}},d=o=>o.done?n(o.value):Promise.resolve(o.value).then(m,f);d((t=t.apply(e,a)).next())});import{a as I,B as S}from"./index.ab15df17.js";import{B as k}from"./BasicForm.f9b68d8c.js";import{u as P}from"./useForm.ff740053.js";import{z as j,br as y,A as M,r as _,u,j as R,B as L,a1 as A,a6 as T,w as V,a4 as U,t as q}from"./vendor.3850bdb6.js";/* empty css               */import{ay as p}from"./index.6d3ed4e5.js";const Z=[{title:"\u90E8\u95E8\u540D\u79F0",dataIndex:"name",width:160,align:"left"},{title:"\u6392\u5E8F",dataIndex:"sort",width:50},{title:"\u72B6\u6001",dataIndex:"status",width:80,customRender:({record:e})=>{const t=~~e.status!=0,n=t?"green":"red",l=t?"\u542F\u7528":"\u505C\u7528";return j(y,{color:n},()=>l)}},{title:"\u5907\u6CE8",dataIndex:"remark"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"created_at",width:180}],ee=[{field:"name",label:"\u90E8\u95E8\u540D\u79F0",component:"Input",colProps:{span:8}},{field:"status",label:"\u72B6\u6001",component:"Select",componentProps:{options:[{label:"\u542F\u7528",value:1},{label:"\u505C\u7528",value:0}]},colProps:{span:8}}],z=[{field:"name",label:"\u90E8\u95E8\u540D\u79F0",component:"Input",required:!0},{field:"parent_id",label:"\u4E0A\u7EA7\u90E8\u95E8",component:"TreeSelect",defaultValue:0,componentProps:{replaceFields:{title:"name",key:"id",value:"id"},getPopupContainer:()=>document.body}},{field:"sort",label:"\u6392\u5E8F",defaultValue:100,component:"InputNumber",required:!0},{field:"status",label:"\u72B6\u6001",component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:"\u542F\u7528",value:1},{label:"\u505C\u7528",value:0}]},required:!0},{label:"\u5907\u6CE8",field:"remark",component:"InputTextArea"}];var i;(function(e){e.DeptList="/departments",e.CreateDept="/departments",e.UpdateDept="/departments/",e.DeleteDept="/departments/"})(i||(i={}));const G=e=>p.get({url:i.DeptList,params:e}),N=e=>p.post({url:i.CreateDept,params:e}),O=(e,a)=>p.put({url:i.UpdateDept+e.toString(),params:a}),te=e=>p.delete({url:i.DeleteDept+e.toString()}),H=M({emits:["success","register"],setup(e,{emit:a}){const t=_(!0),n=_(0),[l,{resetFields:m,setFieldsValue:f,updateSchema:d,validate:o}]=P({labelWidth:100,schemas:z,showActionButtonGroup:!1}),[c,{setModalProps:g,closeModal:h}]=I(s=>b(this,null,function*(){m(),g({confirmLoading:!1}),t.value=!!(s==null?void 0:s.isUpdate),u(t)&&(n.value=s.record.id,f(D({},s.record)));const r=yield G();console.log(r),r.unshift({id:0,parent_id:0,name:"\u9876\u7EA7\u90E8\u95E8",sort:999,created_at:"",remark:"",status:1}),d({field:"parent_id",componentProps:{treeData:r}})})),B=R(()=>u(t)?"\u7F16\u8F91\u90E8\u95E8":"\u65B0\u589E\u90E8\u95E8");function v(){return b(this,null,function*(){try{const s=yield o();if(g({confirmLoading:!0}),!s)return;const r=q({name:s.name||"",remark:s.remark||"",status:s.status||0,parent_id:s.parent_id||0,sort:s.sort||0});u(t)?yield O(n.value,r):yield N(r),console.log(s),h(),a("success")}finally{g({confirmLoading:!1})}})}return(s,r)=>(L(),A(u(S),U(s.$attrs,{onRegister:u(c),title:u(B),onOk:v}),{default:T(()=>[V(u(k),{onRegister:u(l)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});var ae=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:H});export{ae as D,H as _,Z as c,te as d,G as g,ee as s};
