var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,a=(t,o,r)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r;import{u as s,_ as d}from"./useTable.4b946ab8.js";import{_ as m}from"./useForm.152ab070.js";import{a as l}from"./index.18992b80.js";import{ap as c}from"./index.7037d70a.js";import{P as p}from"./permCodeEnum.0c8982e3.js";import{g as u,c as f,s as b,_ as j,d as y}from"./RoleDrawer.vue_vue&type=script&setup=true&lang.4d22f906.js";import{D as x,bq as v,a0 as h,F as g,G as w,w as R,a5 as S,u as C,a1 as O,ac as P,ad as _}from"./vendor.5da97255.js";/* empty css              */import"./index.e53eff0c.js";/* empty css              *//* empty css              */import"./useWindowSizeFn.df7b0c93.js";import"./useContentViewHeight.e053a8fa.js";/* empty css              *//* empty css              *//* empty css              */import"./index.6918c5f5.js";/* empty css              */import"./useSortable.6c5043ea.js";/* empty css              *//* empty css              *//* empty css              */import"./index.6581a3c2.js";import"./download.be553a46.js";import"./index.bf50acea.js";/* empty css              */import"./Tree.vue_vue&type=style&index=0&lang.8abc2ab6.js";const D=_(" 新增角色 "),A=x({name:"RoleManagement"});var F,k=x((F=((e,t)=>{for(var o in t||(t={}))i.call(t,o)&&a(e,o,t[o]);if(r)for(var o of r(t))n.call(t,o)&&a(e,o,t[o]);return e})({},A),t(F,o({setup:function(e){const{hasPermission:t}=c(),[o,{openDrawer:r}]=l(),[i,{reload:n}]=s({title:"角色列表",api:u,columns:f,formConfig:{labelWidth:120,schemas:b},useSearchForm:t(p.AdminSystemRoleQuery),showTableSetting:!0,bordered:!0,showIndexColumn:!1,actionColumn:{width:80,title:"操作",dataIndex:"action",slots:{customRender:"action"},fixed:void 0}});function a(){r(!0,{isUpdate:!1})}function x(e){r(!0,{record:e,isUpdate:!0})}function _(e){return t=this,o=null,r=function*(){yield y(e.id),yield n()},new Promise(((e,i)=>{var n=e=>{try{s(r.next(e))}catch(t){i(t)}},a=e=>{try{s(r.throw(e))}catch(t){i(t)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,a);s((r=r.apply(t,o)).next())}));var t,o,r}function A(){n()}return v((()=>{n()})),(e,r)=>{const n=h("a-button");return g(),w("div",null,[R(C(d),{onRegister:C(i)},{toolbar:S((()=>[C(t)(C(p).AdminSystemRoleCreate)?(g(),O(n,{key:0,type:"primary",onClick:a},{default:S((()=>[D])),_:1})):P("",!0)])),action:S((({record:e})=>[R(C(m),{actions:[{icon:"clarity:note-edit-line",onClick:x.bind(null,e),auth:C(p).AdminSystemRoleUpdate},{icon:"ant-design:delete-outlined",color:"error",auth:C(p).AdminSystemRoleDelete,popConfirm:{title:"是否确认删除",confirm:_.bind(null,e)}}]},null,8,["actions"])])),_:1},8,["onRegister"]),R(j,{onRegister:C(o),onSuccess:A},null,8,["onRegister"])])}}}))));export{k as default};
