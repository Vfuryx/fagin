var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,a=(t,n,i)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i;import{D as s,bq as d,a0 as c,F as m,G as p,w as l,a5 as u,u as f,a1 as b,ac as j,ad as x,$ as y}from"./vendor.5da97255.js";import{ap as h}from"./index.7037d70a.js";import{u as g,_ as v}from"./useTable.4b946ab8.js";import{_ as w}from"./useForm.152ab070.js";import{a as S}from"./index.18992b80.js";import{P as C}from"./permCodeEnum.0c8982e3.js";import{g as O,c as P,s as M,_ as R,d as _}from"./MenuDrawer.vue_vue&type=script&setup=true&lang.3b9bfcce.js";/* empty css              */import"./index.e53eff0c.js";/* empty css              *//* empty css              */import"./useWindowSizeFn.df7b0c93.js";import"./useContentViewHeight.e053a8fa.js";/* empty css              *//* empty css              *//* empty css              */import"./index.6918c5f5.js";/* empty css              */import"./useSortable.6c5043ea.js";/* empty css              *//* empty css              *//* empty css              */import"./index.6581a3c2.js";import"./download.be553a46.js";import"./index.bf50acea.js";/* empty css              */const A=x(" 新增菜单 "),D=s({name:"MenuManagement"});var F,T=s((F=((e,t)=>{for(var n in t||(t={}))o.call(t,n)&&a(e,n,t[n]);if(i)for(var n of i(t))r.call(t,n)&&a(e,n,t[n]);return e})({},D),t(F,n({setup:function(e){const{hasPermission:t}=h(),[n,{openDrawer:i}]=S(),[o,{reload:r,expandAll:a}]=g({title:"菜单列表",api:O,columns:P,formConfig:{labelWidth:120,schemas:M},isTreeTable:!0,pagination:!1,striped:!1,useSearchForm:t(C.AdminSystemMenuQuery),showTableSetting:!0,bordered:!0,showIndexColumn:!1,canResize:!1,actionColumn:{width:80,title:"操作",dataIndex:"action",slots:{customRender:"action"},fixed:void 0}});function s(){i(!0,{isUpdate:!1})}function x(e){i(!0,{record:e,isUpdate:!0})}function D(e){return t=this,n=null,i=function*(){yield _(e.id),yield r()},new Promise(((e,o)=>{var r=e=>{try{s(i.next(e))}catch(t){o(t)}},a=e=>{try{s(i.throw(e))}catch(t){o(t)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,a);s((i=i.apply(t,n)).next())}));var t,n,i}function F(){r()}function T(){y(a)}return d((()=>{r()})),(e,i)=>{const r=c("a-button");return m(),p("div",null,[l(f(v),{onRegister:f(o),onFetchSuccess:T},{toolbar:u((()=>[f(t)(f(C).AdminSystemMenuCreate)?(m(),b(r,{key:0,type:"primary",onClick:s},{default:u((()=>[A])),_:1})):j("",!0)])),action:u((({record:e})=>[l(f(w),{actions:[{icon:"clarity:note-edit-line",onClick:x.bind(null,e),auth:f(C).AdminSystemMenuUpdate},{icon:"ant-design:delete-outlined",color:"error",auth:f(C).AdminSystemMenuDelete,popConfirm:{title:"是否确认删除",confirm:D.bind(null,e)}}]},null,8,["actions"])])),_:1},8,["onRegister"]),l(R,{onRegister:f(n),onSuccess:F},null,8,["onRegister"])])}}}))));export{T as default};
