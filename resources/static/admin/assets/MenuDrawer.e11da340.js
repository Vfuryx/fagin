var M=Object.defineProperty;var w=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var D=(e,o,u)=>o in e?M(e,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[o]=u,g=(e,o)=>{for(var u in o||(o={}))P.call(o,u)&&D(e,u,o[u]);if(w)for(var u of w(o))x.call(o,u)&&D(e,u,o[u]);return e};var F=(e,o,u)=>new Promise((s,r)=>{var f=n=>{try{p(u.next(n))}catch(m){r(m)}},h=n=>{try{p(u.throw(n))}catch(m){r(m)}},p=n=>n.done?s(n.value):Promise.resolve(n.value).then(f,h);p((u=u.apply(e,o)).next())});import{B as R}from"./BasicForm.f9b68d8c.js";import{u as T}from"./useForm.ff740053.js";import{z as v,br as q,A as G,r as B,u as a,j as V,B as j,a1 as A,a6 as L,w as U,a4 as k,t as O}from"./vendor.3850bdb6.js";/* empty css               */import{I as z,ay as d}from"./index.6d3ed4e5.js";import{a as N,B as H}from"./index.71a54c7b.js";const ae=[{title:"\u83DC\u5355\u540D\u79F0",dataIndex:"title",width:200,align:"left"},{title:"\u56FE\u6807",dataIndex:"icon",width:55,customRender:({record:e})=>v(z,{icon:e.icon})},{title:"\u6743\u9650\u6807\u8BC6",dataIndex:"permission",width:200},{title:"\u8DEF\u5F84",dataIndex:"path"},{title:"\u7EC4\u4EF6",dataIndex:"component"},{title:"\u6392\u5E8F",dataIndex:"sort",width:50},{title:"\u72B6\u6001",dataIndex:"status",width:60,customRender:({record:e})=>{const u=~~e.status!=0,s=u?"green":"red",r=u?"\u542F\u7528":"\u505C\u7528";return v(q,{color:s},()=>r)}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"created_at",width:168}],E=e=>e===0,_=e=>e===1,l=e=>e===2,le=[{field:"title",label:"\u83DC\u5355\u540D\u79F0",component:"Input",colProps:{span:8}},{field:"status",label:"\u72B6\u6001",component:"Select",componentProps:{options:[{label:"\u542F\u7528",value:1},{label:"\u505C\u7528",value:0}]},colProps:{span:8}}],W=[{field:"type",label:"\u83DC\u5355\u7C7B\u578B",component:"RadioButtonGroup",defaultValue:0,componentProps:{options:[{label:"\u76EE\u5F55",value:0},{label:"\u83DC\u5355",value:1},{label:"\u6309\u94AE",value:2}]},colProps:{lg:24,md:24}},{field:"name",label:"\u540D\u79F0",component:"Input",required:({values:e})=>!l(e.type),ifShow:({values:e})=>!l(e.type)},{field:"title",label:"\u6807\u9898",component:"Input",required:!0},{field:"parent_id",label:"\u4E0A\u7EA7\u83DC\u5355",component:"TreeSelect",defaultValue:0,required:({values:e})=>!E(e.type),componentProps:{replaceFields:{title:"title",key:"id",value:"id"},getPopupContainer:()=>document.body}},{field:"icon",label:"\u56FE\u6807",component:"IconPicker",required:!0},{field:"path",label:"\u8DEF\u7531\u5730\u5740",component:"Input",required:!0,ifShow:!0},{field:"component",label:"\u7EC4\u4EF6\u8DEF\u5F84",component:"Input",required:({values:e})=>!l(e.type),ifShow:({values:e})=>!l(e.type)},{field:"redirect",label:"\u91CD\u5B9A\u5411",component:"Input",required:!1,ifShow:({values:e})=>!l(e.type)},{field:"frame_src",label:"iframe \u5730\u5740",component:"Input",required:!1,ifShow:({values:e})=>!l(e.type)},{field:"current_active",label:"\u6FC0\u6D3B\u83DC\u5355",component:"Input",required:!1,ifShow:({values:e})=>_(e.type)},{field:"permission",label:"\u6743\u9650\u6807\u8BC6",component:"Input",required:!0,ifShow:({values:e})=>!E(e.type)},{field:"method",label:"\u65B9\u6CD5",component:"RadioButtonGroup",defaultValue:"GET",componentProps:{options:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"}]},ifShow:({values:e})=>l(e.type)},{field:"sort",label:"\u6392\u5E8F",component:"InputNumber",defaultValue:100,required:!0},{field:"status",label:"\u72B6\u6001",component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:"\u542F\u7528",value:1},{label:"\u7981\u7528",value:0}]}},{field:"is_no_cache",label:"\u662F\u5426\u7F13\u5B58",component:"RadioButtonGroup",defaultValue:0,componentProps:{options:[{label:"\u662F",value:0},{label:"\u5426",value:1}]},ifShow:({values:e})=>_(e.type)},{field:"is_hide_child",label:"\u9690\u85CF\u5B50\u83DC\u5355",component:"RadioButtonGroup",defaultValue:0,componentProps:{options:[{label:"\u662F",value:1},{label:"\u5426",value:0}]},ifShow:({values:e})=>_(e.type)},{field:"is_show",label:"\u662F\u5426\u663E\u793A",component:"RadioButtonGroup",defaultValue:0,componentProps:{options:[{label:"\u662F",value:1},{label:"\u5426",value:0}]},ifShow:({values:e})=>!l(e.type)}];var i;(function(e){e.MenuAll="/menus/all",e.MenuList="/menus",e.MenuDetail="/menus/",e.CreateMenu="/menus",e.UpdateMenu="/menus/",e.DeleteMenu="/menus/"})(i||(i={}));const $=()=>d.get({url:i.MenuAll}),ie=e=>d.get({url:i.MenuList,params:e}),J=e=>d.get({url:i.MenuDetail+e.toString()}),K=e=>d.post({url:i.CreateMenu,params:e}),Q=(e,o)=>d.put({url:i.UpdateMenu+e.toString(),params:o}),se=e=>d.delete({url:i.DeleteMenu+e.toString()}),X=G({emits:["success","register"],setup(e,{emit:o}){const u=B(!0),s=B(0),[r,{resetFields:f,setFieldsValue:h,updateSchema:p,validate:n}]=T({labelWidth:100,schemas:W,showActionButtonGroup:!1,baseColProps:{lg:12,md:24}}),[m,{setDrawerProps:b,closeDrawer:C}]=N(t=>F(this,null,function*(){if(f(),b({confirmLoading:!1}),u.value=!!(t==null?void 0:t.isUpdate),a(u)){s.value=t.record.id;const I=yield J(s.value);h(g({},I))}const c=yield $();c.unshift({icon:"",id:0,parent_id:0,title:"\u9876\u7EA7\u83DC\u5355"}),p({field:"parent_id",componentProps:{treeData:c}})})),y=V(()=>a(u)?"\u7F16\u8F91\u83DC\u5355":"\u65B0\u589E\u83DC\u5355");function S(){return F(this,null,function*(){try{const t=yield n();if(b({confirmLoading:!0}),!t)return;const c=O({component:t.component||"",icon:t.icon||"",is_no_cache:t.is_no_cache||0,is_hide_child:t.is_hide_child||0,is_show:t.is_show||0,method:t.method,name:t.name||"",parent_id:t.parent_id||0,path:t.path||"",redirect:t.redirect||"",frame_src:t.frame_src||"",current_active:t.current_active||"",permission:t.permission||"",sort:t.sort||0,status:t.status||0,title:t.title||"",type:t.type||0});a(u)?yield Q(s.value,c):yield K(c),C(),o("success")}finally{b({confirmLoading:!1})}})}return(t,c)=>(j(),A(a(H),k(t.$attrs,{onRegister:a(m),showFooter:"",title:a(y),width:"50%",onOk:S}),{default:L(()=>[U(a(R),{onRegister:a(r)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});var re=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:X});export{re as M,X as _,ae as c,se as d,ie as g,le as s};
