import{D as e,aZ as a,an as s,r as l,P as t,j as o,u as n,_ as i,F as r,G as d,H as c,J as u,w as m,a5 as p,K as f,a_ as g,ad as y,L as x,aS as v,a$ as _,b0 as b,b1 as h,b2 as k,b3 as w,b4 as S,N as j,b5 as C,aa as E,b6 as T,b7 as I,t as L}from"./vendor.5da97255.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{u as P,a as R,L as z,_ as F,b as $}from"./LoginFormTitle.vue_vue&type=script&setup=true&lang.10b434dd.js";import{a as D,f as M,e as N,h as O,i as U}from"./index.ab59a04a.js";const B=["src"];var G=e({setup(e){const G=T,K=I,q=a.Item,A=s.Password,{t:H}=N(),{notification:J,createErrorModal:Q}=U(),{prefixCls:W}=D("login"),Z=M(),{setLoginState:V,getLoginState:X}=P(),{getFormRules:Y}=R(),ee=l(),ae=l(!1),se=l(!1),le=t({account:"vben",password:"123456",id:"",code:""}),te=t({data:"",id:""}),{validForm:oe}=$(ee),ne=o((()=>n(X)===z.LOGIN));function ie(){O().then((e=>{te.data=e.data,te.id=e.id}))}function re(){return e=this,a=null,s=function*(){const e=yield oe();if(e)try{ae.value=!0;const a=yield Z.login(L({password:e.password,username:e.account,id:te.id,code:e.code,mode:"none"}));a&&J.success({message:H("sys.login.loginSuccessTitle"),description:`${H("sys.login.loginSuccessDesc")}: ${a.realName}`,duration:3})}catch(a){ie(),Q({title:H("sys.api.errorTip"),content:a.message||H("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${W}`)||document.body})}finally{ae.value=!1}},new Promise(((l,t)=>{var o=e=>{try{i(s.next(e))}catch(a){t(a)}},n=e=>{try{i(s.throw(e))}catch(a){t(a)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(o,n);i((s=s.apply(e,a)).next())}));var e,a,s}return i((()=>{ie()})),(e,l)=>(r(),d(E,null,[c(m(F,{class:"enter-x"},null,512),[[u,n(ne)]]),c(m(n(a),{class:"p-4 enter-x",model:n(le),rules:n(Y),ref:(e,a)=>{a.formRef=e,ee.value=e},onKeypress:C(re,["enter"])},{default:p((()=>[m(n(q),{name:"account",class:"enter-x"},{default:p((()=>[m(n(s),{size:"large",value:n(le).account,"onUpdate:value":l[0]||(l[0]=e=>n(le).account=e),placeholder:n(H)("sys.login.userName"),class:"fix-auto-fill"},null,8,["value","placeholder"])])),_:1}),m(n(q),{name:"password",class:"enter-x"},{default:p((()=>[m(n(A),{size:"large",visibilityToggle:"",value:n(le).password,"onUpdate:value":l[1]||(l[1]=e=>n(le).password=e),placeholder:n(H)("sys.login.password")},null,8,["value","placeholder"])])),_:1}),m(n(q),{name:"code",class:"enter-x"},{default:p((()=>[f("img",{onClick:ie,src:n(te).data,class:"code"},null,8,B),m(n(s),{size:"large",value:n(le).code,"onUpdate:value":l[2]||(l[2]=e=>n(le).code=e),placeholder:n(H)("sys.login.smsPlaceholder"),class:"fix-auto-fill"},null,8,["value","placeholder"])])),_:1}),m(n(K),{class:"enter-x"},{default:p((()=>[m(n(G),{span:12},{default:p((()=>[m(n(q),null,{default:p((()=>[m(n(g),{checked:se.value,"onUpdate:checked":l[3]||(l[3]=e=>se.value=e),size:"small"},{default:p((()=>[y(x(n(H)("sys.login.rememberMe")),1)])),_:1},8,["checked"])])),_:1})])),_:1}),m(n(G),{span:12},{default:p((()=>[m(n(q),{style:{"text-align":"right"}},{default:p((()=>[m(n(v),{type:"link",size:"small",onClick:l[4]||(l[4]=e=>n(V)(n(z).RESET_PASSWORD))},{default:p((()=>[y(x(n(H)("sys.login.forgetPassword")),1)])),_:1})])),_:1})])),_:1})])),_:1}),m(n(q),{class:"enter-x"},{default:p((()=>[m(n(v),{type:"primary",size:"large",block:"",onClick:re,loading:ae.value},{default:p((()=>[y(x(n(H)("sys.login.loginButton")),1)])),_:1},8,["loading"])])),_:1}),m(n(K),{class:"enter-x"},{default:p((()=>[m(n(G),{md:8,xs:24},{default:p((()=>[m(n(v),{block:"",onClick:l[5]||(l[5]=e=>n(V)(n(z).MOBILE))},{default:p((()=>[y(x(n(H)("sys.login.mobileSignInFormTitle")),1)])),_:1})])),_:1}),m(n(G),{md:8,xs:24,class:"!my-2 !md:my-0 xs:mx-0 md:mx-2"},{default:p((()=>[m(n(v),{block:"",onClick:l[6]||(l[6]=e=>n(V)(n(z).QR_CODE))},{default:p((()=>[y(x(n(H)("sys.login.qrSignInFormTitle")),1)])),_:1})])),_:1}),m(n(G),{md:7,xs:24},{default:p((()=>[m(n(v),{block:"",onClick:l[7]||(l[7]=e=>n(V)(n(z).REGISTER))},{default:p((()=>[y(x(n(H)("sys.login.registerButton")),1)])),_:1})])),_:1})])),_:1}),m(n(_),{class:"enter-x"},{default:p((()=>[y(x(n(H)("sys.login.otherSignIn")),1)])),_:1}),f("div",{class:j(["flex justify-evenly enter-x",`${n(W)}-sign-in-way`])},[m(n(b)),m(n(h)),m(n(k)),m(n(w)),m(n(S))],2)])),_:1},8,["model","rules","onKeypress"]),[[u,n(ne)]])],64))}});export{G as _};
